# Учебный проект: «Система управления заказами»
## 1. Цель проекта

Разработать учебное приложение, моделирующее процесс жизненного цикла заказа в интернет-магазине, с применением паттерна State и принципов объектной композиции.
Проект должен демонстрировать:

отказ от «if-else логики» в пользу состояния,

расширяемость системы (добавление новых состояний и переходов без изменения кода ядра),

понятный и прозрачный жизненный цикл заказа.

## 2. Основные сущности

Пользователь (User)

id

name

balance (сумма на счёте, для эмуляции платежей)

Заказ (Order)

id

userId (создатель заказа)

state (объект состояния, например Created, Paid, Shipped)

history (журнал всех переходов состояний с датой/временем)

Состояния заказа (State)

Created — заказ создан, ожидает оплаты

Paid — заказ оплачен

Shipped — заказ передан в доставку

Delivered — заказ доставлен клиенту

Cancelled — заказ отменён

(Дополнительно, опционально: Returned, Refunded)

## 3. Бизнес-логика

Действия заказа:

pay() — оплата заказа (снимает деньги с баланса пользователя)

ship() — отправка заказа

deliver() — доставка заказа

cancel() — отмена заказа

return() — возврат товара (опционально)

refund() — возврат денег клиенту (опционально)

Правила переходов:

Из Created → можно pay() или cancel().

Из Paid → можно ship() или cancel().

Из Shipped → можно deliver().

Из Delivered → можно return() (опционально).

Из Returned → можно refund().

Из Cancelled или Refunded → никаких действий больше нельзя.

История заказов:

Каждое действие добавляет запись в history:
{ state: "Paid", action: "pay", timestamp: "2025-09-02 18:30" }

## 4. Интерфейс (по выбору преподавателя/студентов)

CLI (консольное меню):

Создать заказ

Оплатить заказ

Отправить заказ

Доставить заказ

Посмотреть историю заказов

Отменить заказ

или

REST API (Express + Node.js):

POST /orders → создать заказ

POST /orders/:id/pay → оплатить

POST /orders/:id/ship → отправить

POST /orders/:id/deliver → доставить

POST /orders/:id/cancel → отменить

GET /orders/:id/history → история

## 5. Технические требования

Язык: JavaScript (Node.js)

Структура кода:

отдельные классы для состояний (Created, Paid, …),

класс Order, который хранит текущее состояние и делегирует вызовы,

класс User для моделирования клиента.

Хранение данных: можно использовать in-memory массивы (БД не требуется).

Логирование: все действия и переходы должны фиксироваться в history.

Код должен быть легко расширяемым (добавление нового состояния = добавление нового класса, без переписывания Order).

## 6. Дополнительные задания (для усложнения)

Реализовать валидацию (например, нельзя оплатить заказ, если у пользователя недостаточно средств).

Добавить состояние Returned (возврат) и Refunded (возврат денег).

Реализовать несколько пользователей, которые могут создавать заказы.

Сделать простую диаграмму состояний (например, в draw.io).

Написать unit-тесты (например, на Jest).